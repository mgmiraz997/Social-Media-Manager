{% extends "home.html" %}
{% load static %}

{% block title %}Analytics · SocialHub{% endblock %}

{% block content %}
<div class="ana-page">

  <!-- Header -->
  <header class="page-head">
    <h1>Analytics</h1>
    <p>Track your social media performance across all platforms</p>
      <link rel="stylesheet" href="{% static 'css/style.css' %}?v=4">
    <div class="right-filter">
      <button class="chip">Last 7 days ▾</button>
    </div>
  </header>

  <!-- Top 4 stat cards -->
  <section class="stats-4">
    <div class="stat card">
      <div class="s-head">Total Reach</div>
      <div class="s-val">45.2K</div>
      <div class="s-trend up">+15.3% from last period</div>
    </div>
    <div class="stat card">
      <div class="s-head">Engagement Rate</div>
      <div class="s-val">3.8%</div>
      <div class="s-trend up">+0.5% from last period</div>
    </div>
    <div class="stat card">
      <div class="s-head">Total Followers</div>
      <div class="s-val">47.3K</div>
      <div class="s-trend up">+8.2% from last period</div>
    </div>
    <div class="stat card">
      <div class="s-head">Avg. Comments</div>
      <div class="s-val">32</div>
      <div class="s-trend down">-2.1% from last period</div>
    </div>
  </section>

  <!-- Charts row -->
  <section class="grid-2">
    <div class="card chart-card">
      <div class="card-title">Engagement Over Time</div>
      <div class="chart-wrap h-320">
        <canvas id="lineChart"></canvas>
      </div>
    </div>

    <div class="card chart-card">
      <div class="card-title">Followers by Platform</div>
      <div class="chart-wrap h-320">
        <canvas id="pieChart"></canvas>
      </div>
    </div>
  </section>

  <!-- Lower row: bar + top posts -->
  <section class="grid-2">
    <div class="card chart-card">
      <div class="card-title">Follower Growth</div>
      <div class="chart-wrap h-300">
        <canvas id="barChart"></canvas>
      </div>
    </div>

    <!-- Top Posts -->
<section class="card list-card">
  <div class="card-title">Top Posts</div>
  <ul class="top-posts">
    <li class="tp-item">
      <div class="tp-left">
        <span class="pill ig">Instagram</span>
        <div class="tp-title">Behind the scenes of our latest photoshoot ✨</div>
        <div class="tp-meta">
          <span>Engagement: 2450</span>
          <span>Reach: 12,500</span>
        </div>
      </div>
      <div class="tp-right">2 days ago</div>
    </li>

    <li class="tp-item">
      <div class="tp-left">
        <span class="pill fb">Facebook</span>
        <div class="tp-title">Excited to announce our new partnership!</div>
        <div class="tp-meta">
          <span>Engagement: 1820</span>
          <span>Reach: 8,900</span>
        </div>
      </div>
      <div class="tp-right">3 days ago</div>
    </li>

    <li class="tp-item">
      <div class="tp-left">
        <span class="pill tw">Twitter</span>
        <div class="tp-title">Thread about industry trends and insights</div>
        <div class="tp-meta">
          <span>Engagement: 1560</span>
          <span>Reach: 15,600</span>
        </div>
      </div>
      <div class="tp-right">1 day ago</div>
    </li>
  </ul>
</section>


  <!-- Platform Performance -->
<section class="card perf-card">
  <div class="card-title">Platform Performance</div>
  <ul class="perf-list">
    <li>
      <div class="left">
        <span class="avatar ig">I</span>
        <div>
          <div class="p-name">Instagram</div>
          <div class="p-sub">18,500 followers</div>
        </div>
      </div>
      <div class="right up">+12.5% <span>vs last month</span></div>
    </li>

    <li>
      <div class="left">
        <span class="avatar fb">F</span>
        <div>
          <div class="p-name">Facebook</div>
          <div class="p-sub">12,300 followers</div>
        </div>
      </div>
      <div class="right up">+12.5% <span>vs last month</span></div>
    </li>

    <li>
      <div class="left">
        <span class="avatar tw">T</span>
        <div>
          <div class="p-name">Twitter</div>
          <div class="p-sub">8,900 followers</div>
        </div>
      </div>
      <div class="right up">+12.5% <span>vs last month</span></div>
    </li>

    <li>
      <div class="left">
        <span class="avatar li">L</span>
        <div>
          <div class="p-name">LinkedIn</div>
          <div class="p-sub">5,400 followers</div>
        </div>
      </div>
      <div class="right up">+12.5% <span>vs last month</span></div>
    </li>

    <li>
      <div class="left">
        <span class="avatar tt">T</span>
        <div>
          <div class="p-name">TikTok</div>
          <div class="p-sub">2,100 followers</div>
        </div>
      </div>
      <div class="right up">+12.5% <span>vs last month</span></div>
    </li>
  </ul>
</section>


<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
<script>
  // Shared options
  const gridColor = '#e5e7eb';

  // Line
  new Chart(document.getElementById('lineChart'), {
    type: 'line',
    data: {
      labels: ['Jan 1','Jan 2','Jan 3','Jan 4','Jan 5','Jan 6','Jan 7'],
      datasets: [
        {label:'Instagram', data:[112,140,168,132,190,165,220], borderColor:'#ef4444', backgroundColor:'transparent', tension:.35, pointRadius:3},
        {label:'Facebook',  data:[18,25,31,20,45,28,50],       borderColor:'#3b82f6', backgroundColor:'transparent', tension:.35, pointRadius:3}
      ]
    },
    options: {
      responsive:true, maintainAspectRatio:false,
      scales:{
        x:{ grid:{color:gridColor} },
        y:{ grid:{color:gridColor}, suggestedMin:0, suggestedMax:220 }
      },
      plugins:{ legend:{display:false} }
    }
  });

  // Pie
  new Chart(document.getElementById('pieChart'), {
    type: 'pie',
    data: {
      labels:['Instagram','Facebook','Twitter','LinkedIn','TikTok'],
      datasets:[{ data:[42,22,14,12,10], backgroundColor:['#ef4444','#3b82f6','#8b5cf6','#64748b','#111827'], borderWidth:0 }]
    },
    options:{ responsive:true, maintainAspectRatio:false, plugins:{legend:{position:'right'}} }
  });

  // Bar
  new Chart(document.getElementById('barChart'), {
    type: 'bar',
    data:{
      labels:['Week 1','Week 2','Week 3','Week 4'],
      datasets:[{ label:'New followers', data:[1200,1350,1450,1600], backgroundColor:'#8b5cf6', borderRadius:6 }]
    },
    options:{
      responsive:true, maintainAspectRatio:false,
      scales:{ x:{grid:{display:false}}, y:{grid:{color:gridColor}} },
      plugins:{ legend:{display:false} }
    }
  });
</script>
{% endblock %}
